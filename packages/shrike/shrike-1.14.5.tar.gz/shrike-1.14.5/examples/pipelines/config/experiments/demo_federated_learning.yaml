defaults:
  - aml: public_workspace
  - compute: public_workspace
  - modules: module_defaults

run:
  experiment_name: demo_federated_learning
  experiment_description: Demo of federated learning APIs.

module_loader: 
  use_local: "!office.smart_reply.fl.data_transfer"
  local_steps_folder: "../../../components"

democomponent:
  input_data: irisdata
  input_data_version: latest

federated_config:
  data_transfer_component: office.smart_reply.fl.data_transfer
  silos: 
    ### after merging, the configs should be:
    # silo1: 
    #   compute: fl-wus
    #   datastore: fl_wus
    #   params:
    #     msg: "shared msg"
    #     dataset: test_uploaded_from_local
    # silo2:
    #   compute: fl-eus
    #   datastore: fl_eus
    #   params:
    #     msg: "shared msg"
    #     dataset: test_csv
    # silo3:
    #   compute: fl-canada
    #   datastore: fl_canada
    #   params:
    #     msg: "per-silo msg"
    #     dataset: test_csv
    silo1: 
      compute: fl-wus
      inherit: [foo_config]
      params:
        dataset: test_uploaded_from_local
    silo2:
      compute: fl-eus
      datastore: fl_eus
    silo3:
      compute: fl-canada
      datastore: fl_canada
      inherit: [foo_config, bar_config]
  max_iterations: 2
  params:
    msg: "random msg"
  config_group:
    default_config:
      params:
        msg: "shared msg"
        dataset: test_csv
    foo_config:
      datastore: fl_wus
    bar_config:
      params:
        msg: "per-silo msg"
