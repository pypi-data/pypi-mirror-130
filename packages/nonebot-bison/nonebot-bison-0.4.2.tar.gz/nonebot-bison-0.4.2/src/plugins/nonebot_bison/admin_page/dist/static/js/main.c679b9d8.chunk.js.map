{"version":3,"sources":["utils/context.ts","api/utils.ts","api/config.ts","component/inputTag.tsx","component/addSubsModal.tsx","component/subscribeCard.tsx","pages/admin/configPage/index.tsx","pages/admin/index.tsx","pages/auth.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["loginContextDefault","login","type","name","id","token","save","LoginContext","createContext","GlobalConfContext","platformConf","loaded","baseUrl","getGlobalConf","a","axios","get","res","data","auth","params","getTargetName","platformName","target","addSubscribe","groupNumber","req","post","delete","patch","then","interceptors","request","use","config","url","startsWith","sessionStorage","getItem","Cancel","headers","error","Promise","reject","response","InputTag","prop","useState","value","setValue","inputVisible","setInputVisible","inputValue","setInputValue","editInputIndex","setEditInputIndex","editInputValue","setEditInputValue","inputRef","useRef","editInputRef","useEffect","current","focus","handleInputConfirm","indexOf","newVal","_","onChange","handleEditInputChange","e","handleEditInputConfirm","newTags","slice","map","tag","index","ref","size","onBlur","onPressEnter","isLongTag","length","tagElem","color","style","userSelect","closable","onClose","removedTag","tags","filter","handleClose","onDoubleClick","preventDefault","title","width","marginRight","verticalAlign","className","onClick","background","border","borderColor","PlusOutlined","addText","InputTagCustom","disabled","AddModal","showModal","setShowModal","refresh","initVal","confirmLoading","setConfirmLoading","useContext","hasTarget","setHasTarget","categories","setCategories","enabledTag","setEnableTag","Form","useForm","form","inited","setInited","setFieldsValue","visible","onCancel","onOk","submit","labelCol","span","onFinish","Object","assign","cats","updateSubscribe","resetFields","Item","label","rules","platform","targetName","console","log","keys","Option","required","message","validator","getFieldValue","resolve","placeholder","mode","indexStr","parseInt","CopyModal","currentGroupNumber","groups","reload","selectedGroups","setSelectGroups","postReqs","selectedGroup","SubscribeCard","groupSubscribes","globalConf","showEditModal","setShowEditModal","actions","EditOutlined","state","CopyOutlined","onConfirm","delSubscribe","handleDelete","DeleteOutlined","catKey","ConfigPage","configData","setConfigData","currentAddingGroupNumber","setCurrentAddingGroupNumber","loadData","getSubscribe","tab","key","push","Panel","header","float","stopPropagation","gutter","xs","sm","md","lg","align","subscribes","subs","idx","s","Admin","changeTab","minHeight","Sider","theme","defaultSelectedKeys","icon","SettingOutlined","BugOutlined","Content","margin","Auth","code","useParams","content","contentUpdate","loginFun","resp","status","to","pathname","setItem","LoginSwitch","App","loginStatus","setLogin","setGlobalConf","fetchGlobalConf","Provider","basename","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c679b9d8.chunk.js","sourcesContent":["import { createContext } from \"react\";\nimport { LoginContextType, GlobalConf } from \"./type\";\n\nexport const loginContextDefault: LoginContextType = {\n  login: {\n    login: false,\n    type: '',\n    name: '',\n    id: '123',\n    // groups: [],\n    token: ''\n  },\n  save: () => {}\n};\n\nexport const LoginContext = createContext(loginContextDefault);\nexport const GlobalConfContext = createContext<GlobalConf>({platformConf: {}, loaded: false});\n","import axios from \"axios\";\n// import { useContext } from 'react';\n// import { LoginContext } from \"../utils/context\";\n\nexport const baseUrl = '/bison/api/'\n\n// const loginStatus = useContext(LoginContext);\naxios.interceptors.request.use(function (config) {\n  if (config.url && config.url.startsWith(baseUrl) && config.url !== `${baseUrl}auth` \n     && config.url !== `${baseUrl}global_conf`) {\n    const token = sessionStorage.getItem('token');\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    } else {\n      throw new axios.Cancel('User not login');\n    }\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n\naxios.interceptors.response.use(function (response) {\n  // const data = response.data;\n  // const parseToMap = (item: any): any => {\n  //   if (item instanceof Array) {\n  //     return item.map(parseToMap);\n  //   } else if (item instanceof Object) {\n  //     let res = new Map();\n  //     for (const key of Object.keys(item)) {\n  //       res.set(key, parseToMap(item[key]));\n  //     }\n  //     return res;\n  //   } else {\n  //     return item;\n  //   }\n  // }\n  // response.data = parseToMap(data);\n  return response;\n});\n","import axios from \"axios\";\nimport { GlobalConf, TokenResp, SubscribeResp, TargetNameResp, SubscribeConfig } from \"../utils/type\";\nimport { baseUrl } from './utils';\n\nexport async function getGlobalConf(): Promise<GlobalConf> {\n  const res = await axios.get<GlobalConf>(`${baseUrl}global_conf`);\n  return res.data;\n}\n\nexport async function auth(token: string): Promise<TokenResp> {\n  const res = await axios.get<TokenResp>(`${baseUrl}auth`, {params: {token}});\n  return res.data;\n}\n\nexport async function getSubscribe(): Promise<SubscribeResp> {\n  const res = await axios.get(`${baseUrl}subs`);\n  return res.data;\n}\n\nexport async function getTargetName(platformName: string, target: string): Promise<TargetNameResp> {\n  const res = await axios.get(`${baseUrl}target_name`, {params: {platformName, target}});\n  return res.data;\n}\n\nexport async function addSubscribe(groupNumber: string, req: SubscribeConfig) {\n  const res = await axios.post(`${baseUrl}subs`, req, {params: {groupNumber}})\n  return res.data;\n}\n\nexport async function delSubscribe(groupNumber: string, platformName: string, target: string) {\n  const res = await axios.delete(`${baseUrl}subs`, {params: {groupNumber, platformName, target}});\n  return res.data;\n}\n\nexport async function updateSubscribe(groupNumber: string, req: SubscribeConfig) {\n  return axios.patch(`${baseUrl}subs`, req, {params: {groupNumber}})\n    .then(res => res.data);\n}\n","import {Input, Tag, Tooltip} from \"antd\";\nimport {PresetColorType, PresetStatusColorType} from 'antd/lib/_util/colors'\nimport {LiteralUnion} from 'antd/lib/_util/type'\nimport React, {useRef, useState, useEffect} from \"react\";\nimport { PlusOutlined } from '@ant-design/icons';\n\ninterface InputTagProp {\n  value?: Array<string>,\n  onChange?: (value: Array<string>) => void\n  color?: LiteralUnion<PresetColorType | PresetStatusColorType, string>;\n  addText?: string\n}\nexport function InputTag(prop: InputTagProp) {\n  const [ value, setValue ] = useState<Array<string>>(prop.value || []);\n  const [ inputVisible, setInputVisible ] = useState(false);\n  const [ inputValue, setInputValue ] = useState('');\n  const [ editInputIndex, setEditInputIndex ] = useState(-1);\n  const [ editInputValue, setEditInputValue ] = useState('');\n  const inputRef = useRef(null as any);\n  const editInputRef = useRef(null as any);\n  useEffect(() => {\n    if (prop.value) {\n      setValue(prop.value);\n    }\n  }, [prop.value])\n  useEffect(() => {\n    if (inputVisible) {\n      inputRef.current.focus()\n    }\n  }, [inputVisible]);\n  useEffect(() => {\n    if (editInputIndex !== -1) {\n        editInputRef.current.focus();\n    }\n  }, [editInputIndex]);\n\n  const handleClose = (removedTag: string) => {\n    const tags = value.filter(tag => tag !== removedTag);\n    setValue(_ => tags);\n    if (prop.onChange) {\n      prop.onChange(tags);\n    }\n  }\n  \n  const showInput = () => {\n    setInputVisible(_ => true);\n  }\n\n  const handleInputConfirm = () => {\n    if (inputValue && value.indexOf(inputValue) === -1) {\n      const newVal = [...value, inputValue];\n      setValue(_ => newVal);\n      if (prop.onChange) {\n        prop.onChange(newVal);\n      }\n    }\n    setInputVisible(_ => false);\n    setInputValue(_ => '');\n  }\n\n  const handleEditInputChange = (e: any) => {\n    setEditInputValue(_ => e.target.value);\n  }\n\n  const handleEditInputConfirm = () => {\n    const newTags = value.slice();\n    newTags[editInputIndex] = editInputValue;\n    setValue(_ => newTags);\n      if (prop.onChange) {\n        prop.onChange(newTags);\n      }\n    setEditInputIndex(_ => -1);\n    setEditInputValue(_ => '');\n  }\n\n  const handleInputChange = (e: any) => {\n    setInputValue(e.target.value);\n  }\n\n  return (\n    <>\n      { value.map((tag, index) => {\n        if (editInputIndex === index) {\n          return (\n            <Input ref={editInputRef} key={tag} size=\"small\"\n              value={editInputValue} onChange={handleEditInputChange}\n            onBlur={handleEditInputConfirm} onPressEnter={handleInputConfirm} />\n        );\n      } \n      const isLongTag = tag.length > 20;\n      const tagElem = (\n        <Tag color={prop.color || \"default\"} style={{userSelect: 'none'}} key={tag} closable onClose={() => handleClose(tag)}>\n          <span onDoubleClick={e => {\n            setEditInputIndex(_ => index);\n            setEditInputValue(_ => tag);\n            e.preventDefault();\n          }}>\n            {isLongTag ? `${tag.slice(0, 20)}...` : tag}\n          </span>\n        </Tag>\n        );\n      return isLongTag ? (\n        <Tooltip title={tag} key={tag}>\n          {tagElem}\n        </Tooltip>\n        ) : ( tagElem );\n      })}\n      {inputVisible && (\n        <Input ref={inputRef} type=\"text\" size=\"small\"\n          style={{width: '78px', marginRight: '8px', verticalAlign: 'top'}} value={inputValue} \n          onChange={handleInputChange} onBlur={handleInputConfirm}\n          onPressEnter={handleInputConfirm} />\n      )}\n      {!inputVisible && (\n        <Tag className=\"site-tag-plus\" onClick={showInput} style={{background: '#fff', border: 'dashed thin', borderColor: '#bfbfbf' }}>\n          <PlusOutlined/> {prop.addText || \"Add Tag\"}\n        </Tag>\n      )}\n    </>\n  );\n\n}\n","import {Form, Input, Modal, Select, Tag} from 'antd';\nimport React, {useContext, useEffect, useState} from \"react\";\nimport {addSubscribe, getTargetName, updateSubscribe} from 'src/api/config';\nimport {InputTag} from 'src/component/inputTag';\nimport {GlobalConfContext} from \"src/utils/context\";\nimport {CategoryConfig, SubscribeConfig} from 'src/utils/type';\n\ninterface InputTagCustomProp {\n  value?: Array<string>,\n  onChange?: (value: Array<string>) => void,\n  disabled?: boolean\n}\nfunction InputTagCustom(prop: InputTagCustomProp) {\n  const [value, setValue] = useState(prop.value || []);\n  const handleSetValue = (newVal: Array<string>) => {\n    setValue(() => newVal);\n    if (prop.onChange) {\n      prop.onChange(newVal);\n    }\n  }\n  useEffect(() => {\n    if (prop.value) {\n      setValue(prop.value);\n    }\n  }, [prop.value])\n  return (\n    <>\n      {\n        prop.disabled ? <Tag color=\"default\">不支持标签</Tag>: \n        <>\n        {value.length === 0 &&\n          <Tag color=\"green\">全部标签</Tag>\n        }\n        <InputTag color=\"blue\" addText=\"添加标签\" value={value} onChange={handleSetValue} />\n      </>\n      } \n    </>\n  )\n}\n\ninterface AddModalProp {\n  showModal: boolean,\n  groupNumber: string,\n  setShowModal: (s: boolean) => void,\n  refresh: () => void\n  initVal?: SubscribeConfig\n}\nexport function AddModal({\n  showModal, groupNumber, setShowModal, refresh, initVal\n}: AddModalProp) {\n  const [ confirmLoading, setConfirmLoading ] = useState<boolean>(false);\n  const { platformConf } = useContext(GlobalConfContext);\n  const [ hasTarget, setHasTarget ] = useState(false);\n  const [ categories, setCategories ] = useState({} as CategoryConfig);\n  const [ enabledTag, setEnableTag ] = useState(false);\n  const [ form ] = Form.useForm();\n  const [ inited, setInited ] = useState(false);\n  const changePlatformSelect = (platform: string) => {\n    setHasTarget(_ => platformConf[platform].hasTarget);\n    setCategories(_ => platformConf[platform].categories);\n    setEnableTag(platformConf[platform].enabledTag)\n    if (! platformConf[platform].hasTarget) {\n      getTargetName(platform, 'default')\n        .then(res => {\n          console.log(res)\n          form.setFieldsValue({\n            targetName: res.targetName,\n            target: ''\n          })\n        })\n    } else {\n      form.setFieldsValue({\n        targetName: '',\n        target: ''\n      })\n    }\n  }\n  const handleSubmit = (value: any) => {\n    let newVal = Object.assign({}, value)\n    if (typeof newVal.tags !== 'object') {\n      newVal.tags = []\n    }\n    if (typeof newVal.cats !== 'object') {\n      newVal.cats = []\n    }\n    if (newVal.target === '') {\n      newVal.target = 'default'\n    }\n    if (initVal) { // patch\n      updateSubscribe(groupNumber, newVal)\n        .then(() => {\n          setConfirmLoading(false);\n          setShowModal(false);\n          form.resetFields();\n          refresh();\n        });\n    } else {\n      addSubscribe(groupNumber, newVal)\n      .then(() => {\n        setConfirmLoading(false);\n        setShowModal(false);\n        form.resetFields();\n        refresh();\n        });\n    }\n  }\n  const handleModleFinish = () => {\n    form.submit();\n    setConfirmLoading(() => true);\n  }\n  useEffect(() => {\n    if (initVal && !inited) {\n      const platformName = initVal.platformName;\n      setHasTarget(platformConf[platformName].hasTarget);\n      setCategories(platformConf[platformName].categories);\n      setEnableTag(platformConf[platformName].enabledTag);\n      setInited(true)\n      form.setFieldsValue(initVal)\n    }\n  }, [initVal, form, platformConf, inited])\n  return <Modal title=\"添加订阅\" visible={showModal} \n    confirmLoading={confirmLoading} onCancel={() => setShowModal(false)}\n    onOk={handleModleFinish}>\n    <Form form={form} labelCol={{ span: 6 }} name=\"b\" onFinish={handleSubmit} >\n      <Form.Item label=\"平台\" name=\"platformName\" rules={[]}>\n        <Select style={{ width: '80%' }} onChange={changePlatformSelect}>\n          {Object.keys(platformConf).map(platformName => \n            <Select.Option key={platformName} value={platformName}>{platformConf[platformName].name}</Select.Option>\n            )}\n        </Select>\n      </Form.Item>\n      <Form.Item label=\"账号\" name=\"target\" rules={[\n        {required: hasTarget, message: \"请输入账号\"},\n        {validator: async (_, value) => {\n          try {\n            const res = await getTargetName(form.getFieldValue('platformName'), value);\n            if (res.targetName) {\n                form.setFieldsValue({\n                  targetName: res.targetName\n                })\n                return Promise.resolve()\n            } else {\n                form.setFieldsValue({\n                  targetName: ''\n                })\n              return Promise.reject(\"账号不正确，请重新检查账号\")\n            }\n          } catch {\n            return Promise.reject('服务器错误，请稍后再试')\n          }\n        }\n        }\n      ]}>\n        <Input placeholder={hasTarget ? \"获取方式见文档\" : \"此平台不需要账号\"} \n          disabled={! hasTarget} style={{ width: \"80%\" }}/>\n      </Form.Item>\n      <Form.Item label=\"账号名称\" name=\"targetName\">\n        <Input style={{ width: \"80%\" }} disabled />\n      </Form.Item>\n      <Form.Item label=\"订阅分类\" name=\"cats\" rules={[\n        {required: Object.keys(categories).length > 0, message: \"请至少选择一个分类进行订阅\"}\n      ]}>\n        <Select style={{ width: '80%' }} mode=\"multiple\" \n          disabled={Object.keys(categories).length === 0}\n          placeholder={Object.keys(categories).length > 0 ?\n            \"请选择要订阅的分类\" : \"本平台不支持分类\"}>\n          {Object.keys(categories).length > 0 &&\n            Object.keys(categories).map((indexStr) => \n              <Select.Option key={indexStr} value={parseInt(indexStr)}>\n                {categories[parseInt(indexStr)]}\n              </Select.Option>\n            )\n          }\n        </Select>\n      </Form.Item>\n      <Form.Item label=\"订阅Tag\" name=\"tags\">\n        <InputTagCustom disabled={!enabledTag}/>\n      </Form.Item>\n    </Form>\n    </Modal>\n}\n","import {CopyOutlined, DeleteOutlined, EditOutlined} from '@ant-design/icons';\nimport {Card, Col, Form, message, Popconfirm, Select, Tag, Tooltip} from 'antd';\nimport Modal from 'antd/lib/modal/Modal';\nimport React, {useContext, useState} from \"react\";\nimport {addSubscribe, delSubscribe} from 'src/api/config';\nimport {GlobalConfContext} from \"src/utils/context\";\nimport {PlatformConfig, SubscribeConfig, SubscribeResp} from 'src/utils/type';\nimport {AddModal} from './addSubsModal';\n\ninterface CopyModalProp {\n  setShowModal: (modalShow: boolean) => void\n  showModal: boolean\n  config: SubscribeConfig,\n  groups: SubscribeResp\n  currentGroupNumber: string\n  reload: () => void\n}\nfunction CopyModal({setShowModal,config,\n    currentGroupNumber,groups,showModal,reload}: CopyModalProp) {\n  const [confirmLoading, setConfirmLoading] = useState(false)\n  const [ selectedGroups, setSelectGroups ] = useState<Array<string>>([]);\n  const postReqs = async (selectedGroups: Array<string>, config: SubscribeConfig) => {\n    for(let selectedGroup of selectedGroups) {\n      await addSubscribe(selectedGroup, config);\n    }\n  }\n  const handleOk = () => {\n    if (selectedGroups.length === 0) {\n      message.error(\"请至少选择一个目标群\");\n    } else{\n      setConfirmLoading(true)\n      postReqs(selectedGroups, config).then(() => {\n        setConfirmLoading(false)\n        setShowModal(false)\n        return reload() \n      })\n    }\n  }\n  return <Modal title=\"复制订阅\" visible={showModal} confirmLoading={confirmLoading}\n    onCancel={() => setShowModal(false)} onOk={handleOk}>\n        <Select mode=\"multiple\" onChange={(value: Array<string>) => setSelectGroups(value)} \n          style={{width: '80%'}}>\n          {\n            Object.keys(groups).filter(groupNumber => groupNumber !== currentGroupNumber)\n              .map((groupNumber) =>\n              <Select.Option value={groupNumber} key={groupNumber}>\n                {`${groupNumber} - ${groups[groupNumber].name}`}\n              </Select.Option>)\n            }\n        </Select>\n    </Modal>\n}\ninterface SubscribeCardProp {\n  groupNumber: string\n  config: SubscribeConfig\n  groupSubscribes: SubscribeResp\n  reload: () => void\n}\nexport function SubscribeCard({groupNumber, config, reload, groupSubscribes}: SubscribeCardProp) {\n  const globalConf = useContext(GlobalConfContext);\n  const [showModal, setShowModal] = useState(false)\n  const [showEditModal, setShowEditModal] = useState(false)\n  const platformConf = globalConf.platformConf[config.platformName] as PlatformConfig;\n  const handleDelete = (groupNumber: string, platformName: string, target: string) => () => {\n    delSubscribe(groupNumber, platformName, target).then(() => {\n      reload() \n    })\n  }\n  return (\n  <Col span={8} key={`${config.platformName}-${config.target}`}> \n    <Card title={`${platformConf.name} - ${config.targetName}`}\n      actions={[\n        <Tooltip title=\"编辑\">\n          <EditOutlined onClick={()=>{setShowEditModal(state => !state)}}/>\n        </Tooltip>,\n        <Tooltip title=\"添加到其他群\">\n          <CopyOutlined onClick={()=>{setShowModal(state => !state)}}/>\n        </Tooltip>,\n        <Popconfirm title={`确定要删除 ${platformConf.name} - ${config.targetName}`}\n          onConfirm={handleDelete(groupNumber, config.platformName, config.target || 'default')}>\n          <Tooltip title=\"删除\" ><DeleteOutlined /></Tooltip>\n        </Popconfirm>, \n        ]}>\n      <Form labelCol={{ span: 4 }}>\n        <Form.Item label=\"订阅帐号\">\n        { platformConf.hasTarget ? config.target : <Tag color=\"default\">无帐号</Tag> }\n        </Form.Item>\n      <Form.Item label=\"订阅类型\">\n        {Object.keys(platformConf.categories).length > 0 ? \n        config.cats.map((catKey: number) => (<Tag color=\"green\" key={catKey}>{platformConf.categories[catKey]}</Tag>)) :\n        <Tag color=\"default\">不支持类型</Tag>}\n      </Form.Item>\n      <Form.Item label=\"订阅Tag\">\n        {platformConf.enabledTag ? config.tags.length > 0 ? config.tags.map(tag => (<Tag color=\"green\" key={tag}>{tag}</Tag>)) : (<Tag color=\"blue\">全部标签</Tag>) :\n        <Tag color=\"default\">不支持Tag</Tag>}\n      </Form.Item>\n      </Form>\n    </Card>\n    <CopyModal setShowModal={setShowModal} reload={reload} currentGroupNumber={groupNumber}\n      showModal={showModal} config={config} groups={groupSubscribes}/>\n    <AddModal showModal={showEditModal} setShowModal={setShowEditModal} \n      groupNumber={groupNumber} refresh={reload} initVal={config}/>\n  </Col>\n  )\n}\n","import {Button, Collapse, Empty, Row} from 'antd';\nimport React, {ReactElement, useEffect, useState} from \"react\";\nimport {getSubscribe} from 'src/api/config';\nimport {SubscribeCard} from 'src/component/subscribeCard';\nimport {SubscribeResp} from 'src/utils/type';\nimport {AddModal} from 'src/component/addSubsModal';\n\ninterface ConfigPageProp {\n  tab: string\n}\nexport function ConfigPage(prop: ConfigPageProp) {\n  const [ configData, setConfigData ] = useState<SubscribeResp>({});\n  const [ showModal, setShowModal ] = useState<boolean>(false);\n  const [ currentAddingGroupNumber, setCurrentAddingGroupNumber ] = useState('');\n  const loadData = () => {\n    getSubscribe()\n      .then(res => {\n          setConfigData(_ => res);\n        });\n  }\n  useEffect(() => {\n    loadData()\n  }, [prop.tab]);\n  const clickNew = (groupNumber: string) => (e: React.MouseEvent<HTMLButtonElement>) => {\n    setShowModal(_ => true);\n    setCurrentAddingGroupNumber(groupNumber);\n    e.stopPropagation();\n  }\n  \n  if (Object.keys(configData).length === 0) {\n    return <Empty />\n  } else {\n    let groups: Array<ReactElement> = [];\n    for (let key of Object.keys(configData)) {\n      let value = configData[key];\n      groups.push(\n        <Collapse.Panel key={key} header={\n          <span>{`${key} - ${value.name}`}<Button style={{float: \"right\"}} onClick={clickNew(key)}>添加</Button></span>\n          }>\n            <Row gutter={[{ xs: 8, sm: 16, md: 24, lg: 32},\n              { xs: 8, sm: 16, md: 24, lg: 32}]} align=\"middle\">\n            {value.subscribes.map((subs, idx) => <SubscribeCard key={idx}\n              groupNumber={key} config={subs} groupSubscribes={configData} reload={loadData}\n              />)}\n          </Row>\n        </Collapse.Panel>\n        )\n    }\n    return (\n    <div>\n      <Collapse>\n        {groups}\n      </Collapse>\n      <AddModal groupNumber={currentAddingGroupNumber} showModal={showModal} \n        refresh={loadData} setShowModal={(s: boolean) => setShowModal(_ => s)} />\n    </div>\n    )\n  }\n}\n\n\n","import {BugOutlined, SettingOutlined} from '@ant-design/icons';\nimport {Layout, Menu} from 'antd';\nimport React, {useContext, useState} from \"react\";\nimport {LoginContext} from \"src/utils/context\";\nimport './admin.css';\nimport {ConfigPage} from './configPage';\n\nexport function Admin() {\n  const { login } = useContext(LoginContext);\n  const [ tab, changeTab ] = useState(\"manage\");\n  return (\n  <Layout style={{ minHeight: '100vh' }}>\n    <Layout.Sider className=\"layout-side\">\n      <div className=\"user\">\n      </div>\n      <Menu mode=\"inline\" theme=\"dark\" defaultSelectedKeys={[tab]}\n        onClick={({key}) => changeTab(key)}>\n        <Menu.Item key=\"manage\" icon={<SettingOutlined />}>订阅管理</Menu.Item>\n        { login.type === 'admin' &&\n        <Menu.Item key=\"log\" icon={<BugOutlined />}>查看日志</Menu.Item>\n        }\n      </Menu>\n    </Layout.Sider>\n    <Layout.Content>\n      <div style={{margin: '24px', background: '#fff', minHeight: '640px'}}>\n      {\n        tab === 'manage' ? \n        <ConfigPage tab={tab}/>\n        : null\n      }\n      </div>\n    </Layout.Content>\n  </Layout>\n  )\n}\n\n","import React, {useContext, useEffect, useState} from \"react\";\nimport { useParams } from \"react-router\";\nimport { auth } from '../api/config';\nimport { LoginContext } from '../utils/context';\nimport { Redirect } from 'react-router-dom'\ninterface AuthParam  {\n  code: string\n}\nexport function Auth() {\n  const { code } = useParams<AuthParam>(); \n  const [ content, contentUpdate ] = useState(<div>Logining...</div>);\n  const { save } = useContext(LoginContext);\n  useEffect(() => {\n    const loginFun = async () => {\n      const resp = await auth(code);\n      if (resp.status === 200) {\n        save({login: true, type: resp.type, name: resp.name, id: resp.id, token: resp.token});\n        contentUpdate(_ => <Redirect to={{pathname: '/admin'}} />);\n        sessionStorage.setItem('token', resp.token);\n      } else {\n        contentUpdate(_ => <div>登录失败，请重新获取连接</div>);\n      }\n    }\n    loginFun();\n  }, [code, save])\n  return content;\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport './App.css';\nimport { LoginContext, loginContextDefault, GlobalConfContext } from './utils/context';\nimport { LoginStatus, GlobalConf, AllPlatformConf } from './utils/type';\nimport { Admin } from './pages/admin';\nimport { getGlobalConf } from './api/config';\nimport { Auth } from './pages/auth';\nimport 'antd/dist/antd.css';\n\n\nfunction LoginSwitch() {\n  const {login, save} = useContext(LoginContext);\n  if (login.login) {\n    return <Admin />;\n  } else {\n    return (\n      <div>\n        not login\n        <button onClick={() => save({\n            login: true, type: 'admin', name: '', id: '123', token: ''\n            })}>1</button>\n      </div>\n    )\n  }\n}\n\nfunction App() {\n  const [loginStatus, setLogin] = useState(loginContextDefault.login);\n  const [globalConf, setGlobalConf] = useState<GlobalConf>({platformConf: {} as AllPlatformConf, loaded: false});\n  // const globalConfContext = useContext(GlobalConfContext);\n  const save = (login: LoginStatus) => setLogin(_ => login);\n  useEffect(() => {\n    const fetchGlobalConf = async () => {\n      const res = await getGlobalConf();\n      setGlobalConf(_ => {return {...res, loaded: true}});\n    };\n    fetchGlobalConf();\n  }, []);\n  return (\n    <LoginContext.Provider value={{login: loginStatus, save}}>\n      <GlobalConfContext.Provider value={globalConf}>\n      { globalConf.loaded &&\n        <Router basename=\"/bison\">\n          <Switch>\n            <Route path=\"/auth/:code\">\n              <Auth />   \n            </Route>\n            <Route path=\"/admin/\">\n              <LoginSwitch /> \n            </Route>\n          </Switch>\n        </Router>\n      }\n      </GlobalConfContext.Provider>\n    </LoginContext.Provider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}