message fakenews, query
    prm num_photos, float
emessage

message fakenews_response, query
    prm num_seen_photos, float
emessage

agent test_agent
    prm susceptability, float, init, 20
    prm friends, list, conn
    prm bots, list, conn
    prm fakenews_msgs, list, msg
    prm is_dead, enum, maybe, 60, no, 40
    prm is_online, enum, yes, 90, no, 10
    prm yes, float, init, 0
    prm test_norm, float, dist, normal, 0, 20
    prm test_exp, float, dist, exp, 15

    behav run_on_start, setup
        action do_something, modify_self
            subs bots, friends, 5
            set is_online, yes
        eaction
    ebehav

    behav run_only_once, one_time, 5
        action send_fakenews, send_msg, fakenews, query
            set send.num_photos, 5
            send bots
        eaction
    ebehav
    
    behav send_fakenews_response, msg_rcv, fakenews, query
        action modify_susceptability, modify_self
            add susceptability, 15
        eaction

        action send_response, send_msg, fakenews_response, query
            decl match, 0
            ieq match, 0
            eblock
            add susceptability, 15
            ieq is_online, yes
                set yes, 150
            eblock
            send rcv.sender

            adde fakenews_msgs, rcv
            reme fakenews_msgs, rcv

            set send, fakenews_msgs

            send rcv.sender

            decl res, 0
            len res, fakenews_msgs
            nin fakenews_msgs, rcv
            eblock

            remen fakenews_msgs, res

            rand res, int, exp, 0
        eaction
    ebehav

    behav spread_fakenews, cyclic, 10
        action spread, send_msg, fakenews, query
            set send.num_photos, 30
            send friends
        eaction
    ebehav
eagent
